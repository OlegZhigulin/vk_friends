# vk_friends
## Описание
Friends - это api где можно добавлять в друзья, создавать заявки(инвайты).
#### Реализован функционал, дающий возможность:
* Подключена админка.
* Подключена документация swagger и redoc.
* Регистрироваться при помощи djoser.
* Оставлять и удалять инвайты.
* Добавлять и удалять друзей.
* Смотреть список своих друзей. 
* При отправке друг другу инвайтов, дружба принимается автоматически. 

### Технологии
``` 
Python 3.10
Django 4.2
DRF 3.12.4
SQlite
djoser
swagger
```

# Endpoint:
- Ресурс /swagger/ или /redoc/: Документация проекта
- Ресурс /auth/users/: Регистрация, сброс пароля и тд смотрите доку к djoser.
- Ресурс /api/friends: Ваши друзья.
- Ресурс /api/user/<int:pk>/status_relationship/: Посмотреть связь с пользователем.
- Ресурс /api/user/<int:id_friend>/delete_from_friend/: Удалить из друзей.
- Ресурс /api/invate/show/: Ваши заявки.
- Ресурс /api/invate/send/<int:user_id>/: Создание заявки на дружбу, нужно передать id пользователя.
- Ресурс /api/invate/<int:id_invate>/accept/: Принять заявку. 
- Ресурс /api/invate/<int:pk>/delete/: Удалить заявку.

# инструкция по запуску и настройке

## в терминале выполнить команду:
git@github.com:OlegZhigulin/vk_friends.git

## установить виртуальное окружение:
python -m venv venv

## установить зависимости:
pip install -r requirements.txt
## перейти в папку с проектом:
cd friends
## подготовить миграции:
python manage.py makemigrations 
## закомитить миграции:
python manage.py migrate
## создать суперпользователя:
python manage.py createsuperuser
## запустить сервер:
python manage.py runserver

# Примеры запросов к API:

### Регистрация пользователя
На эндпоинт http://127.0.0.1:8000/auth/users/ передаем POST запрос с обязательными параметрами username, password. 
```
{"username":"витя_кислый",
"password":"q123456789Abc"}
```
при успешной регистрации получаем ответ и статус код 201:
```
{"username":"витя_кислый",
"password":"q123456789Abc",
"id":7}
```
### Дальше необходимо добавить заголовок авторизации тип basicauth и ваш логин, пароль.

### Получение списка заявок
На эндпоинт http://127.0.0.1:8000/api/invate/show/ передаем GET запрос.

при успешном запросе получаем ответ и статус код 200:
```
[{"id":14,"created":"2023-05-12T07:19:33.936161Z","sender":7,"sender_username":"Администратор"},{"id":15,"created":"2023-05-12T07:19:42.899068Z","sender":4,"sender_username":"superpumber"}]
```
при неуспешном запросе получаем ответ и статус код 401:
```
{"detail":"Invalid username/password."}
```
### Получение списка друзей
На эндпоинт http://127.0.0.1:8000/api/friends/ передаем GET запрос.

при успешном запросе получаем ответ и статус код 200:
```
[{"id":1,"username":"admin"},
{"id":2,"username":"Гром Громыч"}]
```
### Отправка заявки в друзья
На эндпоинт http://127.0.0.1:8000/api/invate/send/здесь id пользователя/ передаем POST запрос.

при успешном запросе получаем ответ и статус код 201:
```
{"id":12,"created":"2023-05-12T05:20:33.445357Z","sender":3,"receiver":5}
```
при повторном запросе получаем ответ и статус код 500:
```
"Вы уже отправили заявку"
```
при запросе несуществующего профиля получаем ответ и статус код 404:
```
"Такого пользователя не существует"
```
### Удаление из друзей
На эндпоинт http://127.0.0.1:8000/api/user/здесь id пользователя/delete_from_friend/ передаем DEKETE запрос.

при успешном запросе получаем статус код 204:
```

```
при запросе с пользователем не из друзей получаем ответ и статус код 404:
```
"А у Вас такого друга и не было"
```
при запросе несуществующего профиля получаем ответ и статус код 404:
```
"Такого пользователя не существует"
```
# для завершения работы нажмите Ctrl+C

### автор Жигулин Олег телеграм @Oleg_Zhigulin